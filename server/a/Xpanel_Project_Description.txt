===============================================================================
                            XPANEL - VPS MANAGEMENT SYSTEM
                          Техническое описание проекта
===============================================================================

ЛЕНДИНГ И ДИЗАЙН САЙТА
=====================

Главная страница (Landing Page):
Современный, минималистичный дизайн с градиентным фоном и анимациями

Hero секция:
- Крупный заголовок: "Управляйте VPS серверами легко и профессионально"
- Подзаголовок: "Xpanel - современная панель управления Linux серверами с автоустановкой и real-time мониторингом"
- Анимированные иконки серверов и графиков
- Две основные кнопки:
  * "Get Started" (градиентная кнопка) → регистрация
  * "Sign In" (прозрачная кнопка с рамкой) → авторизация

Описание возможностей:
✓ "Автоматическая установка на любой Linux сервер"
✓ "Real-time мониторинг ресурсов и производительности"
✓ "Веб-терминал SSH прямо в браузере"
✓ "Файловый менеджер с редактированием кода"
✓ "Git интеграция для разработчиков"
✓ "Многопользовательский доступ с ролями"

Дизайн-система:
- Цветовая схема: темная тема по умолчанию с акцентами #00D4FF (голубой)
- Типографика: современные шрифты (Inter, Roboto)
- Компоненты: скругленные углы, тени, градиенты
- Анимации: плавные переходы, hover эффекты
- Адаптивность: полная поддержка мобильных устройств

Интерфейс панели управления:
- Боковая навигация с иконками
- Карточки серверов с live статусами
- Графики и диаграммы в стиле Material Design
- Темная/светлая тема с переключателем
- Уведомления в стиле toast
- Модальные окна для критических действий

ОБЗОР ПРОЕКТА
=============
Xpanel - это веб-панель управления VPS серверами на Linux с автоматической 
установкой и удаленным управлением. Система предоставляет централизованное 
управление множественными серверами через веб-интерфейс.

ОСНОВНАЯ АРХИТЕКТУРА
===================

Frontend (Веб-интерфейс):
- React.js или Vue.js для динамического интерфейса
- WebSocket для real-time обновлений статуса
- Адаптивный дизайн с темной темой по умолчанию
- Многоязычная поддержка (RU/EN)

Backend (Основной сервер):
- Node.js/Express или Python/FastAPI
- База данных: PostgreSQL или MongoDB
- JWT авторизация
- SSH клиент для подключения к серверам
- API для управления серверами

Agent (Серверная часть на VPS):
- Легкий агент на Python/Go
- Автозапуск как systemd сервис
- WebSocket соединение с основным сервером
- Мониторинг системных ресурсов
- Файловый менеджер
- SSH терминал

ФУНКЦИОНАЛЬНЫЕ МОДУЛИ
====================

1. СИСТЕМА АУТЕНТИФИКАЦИИ
-------------------------
✓ Регистрация пользователей
✓ Авторизация с JWT токенами
✓ Восстановление пароля
✓ Двухфакторная аутентификация (опционально)
✓ Роли пользователей (admin, user)

2. УПРАВЛЕНИЕ СЕРВЕРАМИ
-----------------------
✓ Добавление серверов через SSH подключение
✓ Автоустановка Xpanel агента
✓ Список серверов с статусами
✓ Группировка серверов по категориям
✓ Массовые операции
✓ Вкладка File Manager для управления файлами
✓ Вкладка SSH для управления строкой команд
✓ Вкладка GIT для управления Git проектами (появляется только при установленном GIT модуле)

Форма добавления сервера:
- Имя сервера (отображаемое)
- IP адрес (192.168.0.1 или 192.168.0.1:22)
- SSH порт (по умолчанию 22)
- SSH пользователь
- SSH пароль/ключ
- Порт для Xpanel агента (по умолчанию 8888)

3. ПРОЦЕСС АВТОУСТАНОВКИ
------------------------
Этапы установки:
1. SSH подключение и проверка доступа
2. Проверка совместимости ОС (Ubuntu/Debian/CentOS)
3. Подтверждение установки пользователем
4. Выбор порта для агента
5. Загрузка и установка агента
6. Настройка автозапуска (systemd)
7. Установка соединения с основным сервером

Индикаторы прогресса:
- Процентный индикатор (0-100%)
- Текстовое описание текущего этапа
- Примерное время установки
- Логи установки в реальном времени на веб-интерфейсе

Real-time логирование установки:
✓ Все команды и их вывод передаются на сайт через WebSocket
✓ Пользователь видит каждый шаг установки в реальном времени
✓ Логи включают: обновление пакетов, установку Python, pip, зависимостей
✓ Отображение ошибок и предупреждений немедленно
✓ Цветовое выделение: успех (зеленый), ошибка (красный), процесс (желтый)
✓ Автоскролл к последней записи лога
✓ Возможность сохранить полный лог установки

4. МОНИТОРИНГ СЕРВЕРОВ
----------------------
Системная информация:
- ОС: полное название и версия (например: Debian 12, Ubuntu 22.04 LTS)
- Ядро: версия Linux kernel
- Архитектура: x86_64, ARM64
- Hostname: имя хоста сервера
- Uptime: время работы системы (дни, часы, минуты)
- Дата последней перезагрузки

Отображаемые метрики:
- CPU: загрузка, температура, частота
- RAM: использование, доступно, кэш
- Диск: использование, свободно, I/O
- Сеть: входящий/исходящий трафик
- Swap: использование файла подкачки
- Процессы: количество активных процессов

Графики и диаграммы:
- Real-time графики загрузки
- Исторические данные за 24ч/7д/30д
- Алерты при превышении лимитов

Кнопки управления сервером:
✓ Перезагрузка сервера (Reboot) - с подтверждением
✓ Выключение сервера (Shutdown) - с подтверждением
✓ Перезапуск сервисов (Restart Services)
✓ Обновление системы (System Update)
✓ Git Update (только если установлен GIT модуль)
✓ Очистка кэша и временных файлов
✓ Проверка состояния сервисов

5. SSH ТЕРМИНАЛ
---------------
✓ Веб-терминал с полным SSH доступом
✓ Множественные сессии
✓ История команд
✓ Автодополнение команд
✓ Цветовая схема терминала
✓ Копирование/вставка
✓ Изменение размера окна

6. ФАЙЛОВЫЙ МЕНЕДЖЕР
--------------------
Функции:
✓ Просмотр файловой системы
✓ Создание/удаление файлов и папок
✓ Редактирование файлов (встроенный редактор)
✓ Загрузка файлов на сервер
✓ Скачивание файлов с сервера
✓ Изменение прав доступа (chmod)
✓ Архивирование/разархивирование
✓ Поиск файлов
✓ Предпросмотр изображений

Поддерживаемые форматы:
- Текстовые файлы (.txt, .log, .conf)
- Код (.js, .py, .php, .html, .css)
- Конфигурации (.json, .yaml, .xml)
- Архивы (.zip, .tar.gz, .rar)

7. СИСТЕМА МОДУЛЕЙ (MOD)
------------------------

GIT Модуль:
- Клонирование репозиториев
- Управление ветками
- Pull/Push операции
- Просмотр коммитов
- Настройка SSH ключей для Git
- Кнопка "Git Update" - автоматическое обновление репозитория (git pull)
- Статус изменений и конфликтов
- Откат к предыдущим коммитам

Дополнительные модули (расширяемость):
- Docker управление
- Nginx/Apache конфигурация
- MySQL/PostgreSQL менеджер
- Backup система
- SSL сертификаты
- Cron задачи

8. НАСТРОЙКИ СИСТЕМЫ
--------------------
Пользовательские настройки:
✓ Смена темы (темная/светлая)
✓ Язык интерфейса
✓ Часовой пояс
✓ Уведомления
✓ Горячие клавиши

Управление пользователями:
✓ Добавление пользователей в панель
✓ Поиск пользователей по имени
✓ Проверка существования пользователя
✓ Назначение ролей и прав доступа
✓ Удаление пользователей из панели
✓ Список активных пользователей

Процесс добавления пользователя:
1. Ввод имени пользователя для поиска
2. Система проверяет существование пользователя
3. Отображение результата: "Пользователь найден" или "Пользователь не найден"
4. При найденном пользователе - выбор уровня доступа
5. Отправка приглашения пользователю
6. Подтверждение добавления в панель

Уровни доступа:
- ROOT: супер-администратор с доступом к админ-панели
- Администратор: полный доступ ко всем функциям своих серверов
- Модератор: доступ к мониторингу и файлам, без критических операций
- Пользователь: только просмотр статистики и файлов
- Гость: только просмотр основной информации

Настройки сервера:
✓ Интервал мониторинга
✓ Лимиты алертов
✓ Резервное копирование
✓ Логирование
✓ Безопасность

9. ВКЛАДКА GIT (при установленном модуле)
------------------------------------------
Отдельная вкладка GIT появляется ТОЛЬКО при установленном GIT модуле и содержит:

Управление проектами:
✓ Список всех Git репозиториев на сервере
✓ Статус каждого проекта (актуальный/есть изменения)
✓ Путь к проекту на сервере
✓ Активная ветка и доступные ветки
✓ Последний коммит (автор, дата, сообщение)

История и логи:
✓ Полная история коммитов для каждого проекта
✓ Логи всех Git операций (pull, push, checkout, merge)
✓ Временные метки всех действий
✓ Автор каждого действия (пользователь панели)

Автоматическое сохранение состояний:
✓ Автоматические снимки состояния перед каждым pull/merge
✓ Возможность отката к любому предыдущему состоянию
✓ Сохранение изменений без использования Git команд
✓ Быстрое восстановление файлов одним кликом

Функции управления:
✓ Git Update (pull) для всех проектов или отдельно
✓ Переключение между ветками
✓ Просмотр изменений (diff) перед применением
✓ Откат к конкретному коммиту
✓ Создание локальных бэкапов перед операциями
✓ Массовые операции для нескольких проектов

Интерфейс вкладки GIT:
- Таблица проектов с колонками: Название, Путь, Ветка, Статус, Последний коммит
- Кнопки: "Update All", "Add Repository", "Remove Project"
- Панель деталей проекта при выборе
- История операций в реальном времени
- Индикаторы выполнения для длительных операций

10. АДМИН-ПАНЕЛЬ (только для ROOT пользователя)
------------------------------------------------
Отдельная вкладка "Админ Панель" доступна ТОЛЬКО пользователю с ролью ROOT и содержит:

Управление всеми пользователями:
✓ Список всех зарегистрированных пользователей
✓ Информация о пользователях (дата регистрации, последний вход)
✓ Количество серверов у каждого пользователя
✓ Активность пользователей
✓ Блокировка/разблокировка пользователей
✓ Удаление пользователей из системы

Мониторинг всех серверов:
✓ Общий список всех серверов в системе
✓ Владелец каждого сервера
✓ Статус серверов (онлайн/офлайн)
✓ Установленные модули на каждом сервере
✓ Основная информация о сервере (IP, ОС, uptime)
✓ Дата добавления сервера в систему

Функции модерации:
✓ Просмотр установленных модов на любом сервере
✓ Блокировка серверов при нарушении правил
✓ Разблокировка заблокированных серверов
✓ Отправка уведомлений владельцам серверов
✓ Просмотр логов действий пользователей
✓ Статистика использования системы

Ограничения ROOT пользователя:
- НЕ может управлять чужими серверами напрямую
- НЕ может выполнять команды на чужих серверах
- НЕ может изменять файлы на чужих серверах
- Может только просматривать и блокировать при нарушениях

Интерфейс админ-панели:
- Вкладка "Пользователи" с таблицей всех пользователей
- Вкладка "Серверы" с общим списком серверов
- Панель статистики и аналитики
- Система уведомлений и алертов
- Журнал действий администратора

11. УДАЛЕНИЕ XPANEL
-------------------
Процесс деинсталляции:
1. Подтверждение удаления
2. Остановка сервисов
3. Удаление файлов агента
4. Очистка автозапуска
5. Удаление из списка серверов

ТЕХНОЛОГИЧЕСКИЙ СТЕК
===================

Frontend:
- React.js 18+ с TypeScript
- Material-UI или Ant Design
- WebSocket для real-time
- Chart.js для графиков
- Monaco Editor для редактирования кода

Backend:
- Node.js + Express + TypeScript
- Socket.io для WebSocket
- Prisma ORM + PostgreSQL
- JWT + bcrypt для аутентификации
- node-ssh для SSH подключений

Agent (на серверах):
- Python 3.8+ или Go 1.19+
- psutil для мониторинга системы
- websockets для связи
- systemd для автозапуска

DevOps:
- Docker для контейнеризации
- Nginx как reverse proxy
- PM2 для управления процессами
- GitHub Actions для CI/CD

БЕЗОПАСНОСТЬ
============
✓ HTTPS обязательно
✓ JWT токены с коротким временем жизни
✓ Шифрование SSH ключей
✓ Rate limiting для API
✓ Валидация всех входных данных
✓ Логирование всех действий
✓ Двухфакторная аутентификация
✓ Whitelist IP адресов (опционально)

ИНТЕРФЕЙС ГЛАВНОЙ ПАНЕЛИ
=======================

Главный экран сервера отображает:
✓ Название и версия ОС (Debian 12, Ubuntu 22.04 LTS, CentOS 8)
✓ Время работы системы (Uptime) в формате: "15 дней, 3 часа, 42 минуты"
✓ Дата и время последней перезагрузки
✓ Статус подключения к серверу (онлайн/офлайн)
✓ Версия установленного Xpanel агента
✓ Быстрые действия через кнопки управления

Условные кнопки управления:
- Кнопка "Git Update" появляется ТОЛЬКО если установлен GIT модуль
- Кнопки перезагрузки требуют подтверждения действия
- Индикаторы выполнения для длительных операций
- Уведомления об успешном/неуспешном выполнении команд

ДОПОЛНИТЕЛЬНЫЕ ФИШКИ
===================

1. Dashboard Analytics:
- Общая статистика по всем серверам
- Топ потребители ресурсов
- Алерты и уведомления
- Экспорт отчетов

2. Automation:
- Планировщик задач
- Автоматические бэкапы
- Скрипты автоматизации
- Webhooks для интеграций

3. Multi-user Support:
- Командная работа с общим доступом к панели
- Разграничение доступа к серверам по ролям
- Аудит действий пользователей с временными метками
- Комментарии к серверам и совместное редактирование
- Система приглашений и подтверждений
- Уведомления о действиях других пользователей

4. Mobile App:
- React Native приложение
- Push уведомления
- Быстрый доступ к критичным функциям
- Офлайн просмотр статистики

5. API для разработчиков:
- RESTful API
- Webhook endpoints
- SDK для популярных языков
- Документация OpenAPI

ЭТАПЫ РАЗРАБОТКИ
===============

Phase 1 (MVP):
- Базовая аутентификация
- Добавление серверов
- SSH терминал
- Базовый мониторинг

Phase 2:
- Файловый менеджер
- Автоустановка агента
- Система модулей
- Улучшенный UI

Phase 3:
- Расширенная аналитика
- Мобильное приложение(не делаем)
- API для разработчиков
- Дополнительные модули

ТРЕБОВАНИЯ К СЕРВЕРАМ
====================

Минимальные требования для сервера (автоустановка):
- Linux (Ubuntu 18+, Debian 9+, CentOS 7+)
- RAM: 128MB свободной памяти
- Диск: 50MB свободного места
- SSH доступ с правами sudo/root
- Интернет соединение для загрузки компонентов

Автоматически устанавливается при подключении:
✓ Python 3.6+ (если отсутствует)
✓ pip и необходимые Python библиотеки
✓ Xpanel агент
✓ systemd сервис для автозапуска
✓ Все зависимости и конфигурации

Процесс автоустановки зависимостей с логированием:
1. Определение дистрибутива Linux → лог: "Detected: Ubuntu 22.04 LTS"
2. Обновление пакетного менеджера (apt/yum/dnf) → лог: "apt update && apt upgrade"
3. Установка Python 3 и pip (если не установлены) → лог: "Installing python3-pip..."
4. Установка системных зависимостей → лог: "Installing psutil, websockets..."
5. Загрузка и установка Xpanel агента → лог: "Downloading Xpanel agent v1.0..."
6. Настройка автозапуска через systemd → лог: "Creating systemd service..."
7. Запуск агента и проверка соединения → лог: "Agent started successfully"

Примеры логов в реальном времени:
[12:34:56] [INFO] Connecting to server via SSH...
[12:34:57] [SUCCESS] SSH connection established
[12:34:58] [INFO] Checking OS compatibility...
[12:34:59] [SUCCESS] Ubuntu 22.04 LTS detected - compatible
[12:35:00] [INFO] Updating package manager...
[12:35:15] [SUCCESS] Package manager updated
[12:35:16] [INFO] Installing Python 3.9...
[12:35:45] [SUCCESS] Python 3.9 installed successfully
[12:35:46] [INFO] Installing pip packages: psutil websockets...
[12:36:12] [SUCCESS] All dependencies installed
[12:36:13] [INFO] Downloading Xpanel agent...
[12:36:25] [SUCCESS] Agent downloaded and configured
[12:36:26] [INFO] Starting Xpanel service...
[12:36:28] [SUCCESS] Installation completed successfully!

Рекомендуемые требования для основного сервера:
- RAM: 2GB+
- CPU: 2 cores+
- Диск: 20GB SSD
- Bandwidth: 100Mbps+

===============================================================================
                              КОНЕЦ ДОКУМЕНТА
===============================================================================
