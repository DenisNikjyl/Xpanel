@echo off
echo ===============================================================================
echo                            XPANEL - ЗАПУСК СЕРВЕРА
echo ===============================================================================
echo.

cd /d "%~dp0"

echo [1/3] Проверка Node.js...
node --version >nul 2>&1
if errorlevel 1 (
    echo ОШИБКА: Node.js не установлен!
    echo Скачайте и установите Node.js с https://nodejs.org/
    pause
    exit /b 1
)

echo [2/3] Установка зависимостей сервера...
if not exist "node_modules" (
    echo Устанавливаем зависимости сервера...
    call npm install
    if errorlevel 1 (
        echo ОШИБКА: Не удалось установить зависимости сервера!
        pause
        exit /b 1
    )
)

echo [3/3] Запуск Xpanel сервера...
echo.
echo ===============================================================================
echo   Xpanel сервер запускается на http://localhost:3001
echo   Для остановки нажмите Ctrl+C
echo ===============================================================================
echo.

call npm start

pause
